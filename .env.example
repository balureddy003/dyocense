# Dyocense Development Environment Configuration
# Copy this file to .env and customize for your local development

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=DEBUG

# =============================================================================
# FEATURE FLAGS - Control real implementations vs stubs
# =============================================================================

# Force all services to use in-memory stubs (fastest for dev/testing)
FORCE_INMEMORY_MODE=true

# Individual service toggles (ignored if FORCE_INMEMORY_MODE=true)
USE_MONGODB=false
USE_KEYCLOAK=false
USE_NEO4J=false
USE_QDRANT=false
USE_LLM=false

# Strict mode - fail if dependencies unavailable (keep false for dev)
STRICT_MODE=false

# Optional features
ENABLE_TRANSACTIONS=false
ENABLE_CACHING=true
ENABLE_METRICS=false

# =============================================================================
# MONGODB (Optional for development)
# =============================================================================

# Option 1: Use in-memory fallback (default)
# Just comment out or don't set MONGO_URI

# Option 2: Local MongoDB
# MONGO_HOST=localhost
# MONGO_PORT=27017
# MONGO_DB_NAME=dyocense_dev

# Option 3: MongoDB Atlas
# MONGO_URI=mongodb+srv://<username>:<password>@cluster.mongodb.net/?retryWrites=true&w=majority
# MONGO_DB_NAME=dyocense_dev

# =============================================================================
# KEYCLOAK (Optional for development)
# =============================================================================

# Use demo token authentication by default (Bearer demo-tenant)
# To enable real Keycloak, uncomment and configure:

# KEYCLOAK_SERVER_URL=http://localhost:8080
# KEYCLOAK_REALM=dyocense
# KEYCLOAK_CLIENT_ID=dyocense-api
# KEYCLOAK_CLIENT_SECRET=your-client-secret

# Admin credentials for user management
# KEYCLOAK_ADMIN_USERNAME=admin
# KEYCLOAK_ADMIN_PASSWORD=admin

# =============================================================================
# LLM SERVICES (Optional for development)
# =============================================================================

# Stub compiler will be used if not configured
# Generates deterministic inventory optimization problems

# Option 1: Azure OpenAI (Recommended for enterprise)
# LLM_PROVIDER=azure
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
# AZURE_OPENAI_API_KEY=your-api-key
# AZURE_OPENAI_DEPLOYMENT=gpt-4
# AZURE_OPENAI_API_VERSION=2024-02-15-preview

# Option 2: OpenAI API
# LLM_PROVIDER=openai
# OPENAI_API_KEY=sk-...
# OPENAI_MODEL=gpt-4

# LLM tuning
# LLM_TEMPERATURE=0.7
# LLM_MAX_TOKENS=4000
# LLM_TIMEOUT=30

# =============================================================================
# NEO4J GRAPH DATABASE (Optional for development)
# =============================================================================

# NullGraphStore fallback will be used if not configured
# Evidence ingestion will be no-op

# Local Neo4j
# NEO4J_URI=bolt://localhost:7687
# NEO4J_USERNAME=neo4j
# NEO4J_PASSWORD=password
# NEO4J_DATABASE=neo4j

# Neo4j AuraDB (Cloud)
# NEO4J_URI=neo4j+s://<instance-id>.databases.neo4j.io
# NEO4J_USERNAME=neo4j
# NEO4J_PASSWORD=your-password

# =============================================================================
# QDRANT VECTOR DATABASE (Optional for development)
# =============================================================================

# InMemoryKnowledgeStore fallback will be used if not configured
# Returns empty search results

# Local Qdrant
# QDRANT_URL=http://localhost:6333
# QDRANT_COLLECTION=dyocense_knowledge

# Qdrant Cloud
# QDRANT_URL=https://<cluster-id>.aws.cloud.qdrant.io
# QDRANT_API_KEY=your-api-key
# QDRANT_COLLECTION=dyocense_knowledge

# =============================================================================
# CONNECTOR ENCRYPTION
# =============================================================================

# Encryption key for securing connector credentials (required for production)
# Generate a new key with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# CONNECTOR_ENCRYPTION_KEY=your-base64-encoded-key-here

# =============================================================================
# DEVELOPMENT-ONLY SETTINGS
# =============================================================================

# Allow anonymous access (DO NOT USE IN PRODUCTION)
ALLOW_ANONYMOUS=false

# =============================================================================
# NOTES
# =============================================================================
#
# Default Development Behavior:
# - All external dependencies disabled
# - In-memory fallbacks for MongoDB, Neo4j, Qdrant
# - Demo token authentication (Bearer demo-tenant)
# - Stub compiler generates deterministic OPS
# - Stub solver returns simple solutions
#
# To Enable Real Services:
# 1. Set FORCE_INMEMORY_MODE=false
# 2. Set USE_<SERVICE>=true for services you want to enable
# 3. Configure connection details for enabled services
# 4. Ensure services are running and accessible
#
# Health Check:
# curl http://localhost:8001/health/detailed
#
# Look for "mode": "in-memory" or "mode": "fallback" to see which
# services are using stubs vs real implementations.
