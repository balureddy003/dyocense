{
  "info": {
    "name": "OptiGuide Compile",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Compile Weighted Goal",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Authorization", "value": "Bearer {{jwt}}"},
          {"key": "Idempotency-Key", "value": "idem_{{timestamp}}"}
        ],
        "url": {
          "raw": "{{kernel}}/optiguide/compile",
          "host": ["{{kernel}}"],
          "path": ["optiguide", "compile"]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"tenant_id\": \"tenant_std\",\n  \"tier\": \"standard\",\n  \"goal_dsl\": {\n    \"objective\": {\"cost\": 0.6, \"service\": 0.3, \"co2\": 0.1},\n    \"constraints\": {\"budget_month\": 9000, \"service_min\": 0.95},\n    \"policies\": {}\n  },\n  \"context\": {{context_payload}},\n  \"scenarios\": {{scenario_payload}}\n}"
        }
      }
    },
    {
      "name": "Compile DRO Mode",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Authorization", "value": "Bearer {{jwt}}"},
          {"key": "Idempotency-Key", "value": "idem_{{timestamp}}"}
        ],
        "url": {
          "raw": "{{kernel}}/optiguide/compile",
          "host": ["{{kernel}}"],
          "path": ["optiguide", "compile"]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"tenant_id\": \"tenant_pro\",\n  \"tier\": \"pro\",\n  \"goal_dsl\": {\n    \"objective\": {\"cost\": 0.5, \"service\": 0.2, \"setup_cost\": 0.3},\n    \"constraints\": {\"budget_month\": 12000, \"robust\": {\"mode\": \"dro_wasserstein\"}},\n    \"policies\": {\"deny\": false}\n  },\n  \"context\": {{context_payload}},\n  \"scenarios\": {{scenario_payload}}\n}"
        }
      }
    }
  ]
}
