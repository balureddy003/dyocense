# =====================================================================
# Dyocense SMB Deployment - Environment Configuration
# =====================================================================
# Copy this file to .env and update with your values
# =====================================================================

# ---------------------------------------------------------------------
# Deployment Mode
# ---------------------------------------------------------------------
DEPLOYMENT_MODE=unified
PERSISTENCE_BACKEND=postgres

# ---------------------------------------------------------------------
# PostgreSQL Configuration
# ---------------------------------------------------------------------
POSTGRES_HOST=postgres
# For LOCAL (non-Docker) development, change POSTGRES_HOST to "localhost".
# Docker Compose creates a service DNS entry named "postgres"; outside Compose this
# hostname won't resolve and you'll fall back to in-memory unless you switch to localhost.
POSTGRES_PORT=5432
POSTGRES_DB=dyocense
POSTGRES_USER=dyocense
POSTGRES_PASSWORD=change_this_secure_password_in_production
POSTGRES_MIN_POOL_SIZE=2
POSTGRES_MAX_POOL_SIZE=10

# ---------------------------------------------------------------------
# MongoDB Configuration (only if using mongodb backend)
# ---------------------------------------------------------------------
# MONGO_URI=mongodb://localhost:27017/dyocense
# MONGO_HOST=localhost
# MONGO_PORT=27017
# MONGO_DB_NAME=dyocense
# MONGO_USERNAME=
# MONGO_PASSWORD=

# ---------------------------------------------------------------------
# Server Configuration
# ---------------------------------------------------------------------
HOST=0.0.0.0
PORT=8001
WORKER_COUNT=2
LOG_LEVEL=INFO

# ---------------------------------------------------------------------
# Security (CHANGE THESE IN PRODUCTION!)
# ---------------------------------------------------------------------
# Generate with: openssl rand -base64 32
SECRET_KEY=your_secret_key_here_change_in_production
JWT_SECRET=your_jwt_secret_here_change_in_production

# CORS origins (comma-separated)
CORS_ORIGINS=*

# ---------------------------------------------------------------------
# Performance Tuning
# ---------------------------------------------------------------------
MAX_CONCURRENT_RUNS=10
EVENT_PROCESSING_INTERVAL=1
ORCHESTRATION_INTERVAL=2

# ---------------------------------------------------------------------
# Feature Flags - Core Services
# ---------------------------------------------------------------------
ENABLE_ACCOUNTS_SERVICE=true
ENABLE_CHAT_SERVICE=true

# ---------------------------------------------------------------------
# Feature Flags - Kernel Services
# ---------------------------------------------------------------------
ENABLE_COMPILER_SERVICE=true
ENABLE_FORECAST_SERVICE=true
ENABLE_POLICY_SERVICE=true
ENABLE_OPTIMISER_SERVICE=true
ENABLE_DIAGNOSTICIAN_SERVICE=true
ENABLE_EXPLAINER_SERVICE=true

# ---------------------------------------------------------------------
# Feature Flags - Data & Integration Services
# ---------------------------------------------------------------------
# NOTE: Connectors service currently uses MongoDB-backed repository.
# Leave disabled for SMB/Postgres-only deployments, or enable only if
# USE_MONGODB=true and Mongo is configured.
ENABLE_CONNECTORS_SERVICE=false
ENABLE_KNOWLEDGE_SERVICE=true
ENABLE_EVIDENCE_SERVICE=true

# ---------------------------------------------------------------------
# Feature Flags - Platform Services
# ---------------------------------------------------------------------
ENABLE_MARKETPLACE_SERVICE=true
ENABLE_SCENARIO_SERVICE=true

# ---------------------------------------------------------------------
# Observability
# ---------------------------------------------------------------------
ENABLE_TELEMETRY=true
ENABLE_METRICS=true

# ---------------------------------------------------------------------
# External Services - Email
# ---------------------------------------------------------------------
ENABLE_EMAIL=true
SENDGRID_API_KEY=your_sendgrid_api_key

# Email sender configuration
EMAIL_FROM=noreply@dyocense.com
EMAIL_FROM_NAME=Dyocense

# ---------------------------------------------------------------------
# External Services - Blob Storage
# ---------------------------------------------------------------------
ENABLE_BLOB_STORAGE=false

# If blob storage enabled, configure:
# AWS_S3_BUCKET=your-bucket-name
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_REGION=us-east-1

# Or Azure Blob:
# AZURE_STORAGE_ACCOUNT=your-account
# AZURE_STORAGE_KEY=your-key
# AZURE_STORAGE_CONTAINER=your-container

# ---------------------------------------------------------------------
# Plan Tier Configuration
# ---------------------------------------------------------------------
DEFAULT_PLAN_TIER=smb_starter

# ---------------------------------------------------------------------
# Monitoring - Grafana (if using monitoring profile)
# ---------------------------------------------------------------------
GRAFANA_USER=admin
GRAFANA_PASSWORD=change_this_secure_password
GRAFANA_PORT=3000

# ---------------------------------------------------------------------
# Production - Nginx (if using production profile)
# ---------------------------------------------------------------------
HTTP_PORT=80
HTTPS_PORT=443

# Domain configuration
# DOMAIN=yourdomain.com
# LETSENCRYPT_EMAIL=admin@yourdomain.com

# ---------------------------------------------------------------------
# Development Settings
# ---------------------------------------------------------------------
# RELOAD=true  # Enable auto-reload for development
# DEBUG=false  # Enable debug mode
