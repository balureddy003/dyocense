# =====================================================================
# Dyocense SMB Deployment - Environment Configuration
# =====================================================================
# Copy this file to .env and update with your values
# =====================================================================

# ---------------------------------------------------------------------
# Deployment Mode
# ---------------------------------------------------------------------
DEPLOYMENT_MODE=unified
PERSISTENCE_BACKEND=postgres
USE_MONGODB=false
ENABLE_PGVECTOR=true
PGVECTOR_COLLECTION=embeddings

# ---------------------------------------------------------------------
# PostgreSQL Configuration
# ---------------------------------------------------------------------
POSTGRES_URL="postgresql://metadata:metadataPass123@localhost:5432/metadata"
POSTGRES_HOST=localhost
# For LOCAL (non-Docker) development, change POSTGRES_HOST to "localhost".
# Keeping it as "postgres" is correct only when using docker-compose.smb.yml.
POSTGRES_PORT=5432
POSTGRES_DB=metadata
POSTGRES_USER=metadata
POSTGRES_PASSWORD=metadataPass123
POSTGRES_MIN_POOL_SIZE=2
POSTGRES_MAX_POOL_SIZE=10

# ---------------------------------------------------------------------
# MongoDB Configuration (only if using mongodb backend)
# ---------------------------------------------------------------------
# MONGO_URI=mongodb://localhost:27017/dyocense
# MONGO_HOST=localhost
# MONGO_PORT=27017
# MONGO_DB_NAME=dyocense
# MONGO_USERNAME=
# MONGO_PASSWORD=

# ---------------------------------------------------------------------
# Server Configuration
# ---------------------------------------------------------------------
HOST=0.0.0.0
PORT=8001
WORKER_COUNT=2
LOG_LEVEL=INFO

# ---------------------------------------------------------------------
# Security (CHANGE THESE IN PRODUCTION!)
# ---------------------------------------------------------------------
# Generate with: openssl rand -base64 32
SECRET_KEY=your_secret_key_here_change_in_production
JWT_SECRET=your_jwt_secret_here_change_in_production

# CORS origins (comma-separated)
CORS_ORIGINS=*

# ---------------------------------------------------------------------
# Performance Tuning
# ---------------------------------------------------------------------
MAX_CONCURRENT_RUNS=10
EVENT_PROCESSING_INTERVAL=1
ORCHESTRATION_INTERVAL=2

# ---------------------------------------------------------------------
# Feature Flags - Core Services
# ---------------------------------------------------------------------
ENABLE_ACCOUNTS_SERVICE=true
ENABLE_CHAT_SERVICE=true

# ---------------------------------------------------------------------
# Feature Flags - Kernel Services
# ---------------------------------------------------------------------
ENABLE_COMPILER_SERVICE=true
ENABLE_FORECAST_SERVICE=true
ENABLE_POLICY_SERVICE=true
ENABLE_OPTIMISER_SERVICE=true
ENABLE_DIAGNOSTICIAN_SERVICE=true
ENABLE_EXPLAINER_SERVICE=true

# ---------------------------------------------------------------------
# Feature Flags - Data & Integration Services
# ---------------------------------------------------------------------
# Connectors currently depend on MongoDB. Disable by default for SMB/Postgres.
ENABLE_CONNECTORS_SERVICE=false
ENABLE_KNOWLEDGE_SERVICE=true
ENABLE_EVIDENCE_SERVICE=true

# ---------------------------------------------------------------------
# Feature Flags - Platform Services
# ---------------------------------------------------------------------
ENABLE_MARKETPLACE_SERVICE=true
ENABLE_SCENARIO_SERVICE=true

# ---------------------------------------------------------------------
# Observability
# ---------------------------------------------------------------------
ENABLE_TELEMETRY=true
ENABLE_METRICS=true

# ---------------------------------------------------------------------
# External Services - Email
# ---------------------------------------------------------------------
ENABLE_EMAIL=true
SENDGRID_API_KEY=your_sendgrid_api_key

# Email sender configuration
EMAIL_FROM=noreply@dyocense.com
EMAIL_FROM_NAME=Dyocense

# ---------------------------------------------------------------------
# External Services - Blob Storage
# ---------------------------------------------------------------------
ENABLE_BLOB_STORAGE=false

# If blob storage enabled, configure:
# AWS_S3_BUCKET=your-bucket-name
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_REGION=us-east-1

# Or Azure Blob:
# AZURE_STORAGE_ACCOUNT=your-account
# AZURE_STORAGE_KEY=your-key
# AZURE_STORAGE_CONTAINER=your-container

# ---------------------------------------------------------------------
# Plan Tier Configuration
# ---------------------------------------------------------------------
DEFAULT_PLAN_TIER=smb_starter

# ---------------------------------------------------------------------
# Monitoring - Grafana (if using monitoring profile)
# ---------------------------------------------------------------------
GRAFANA_USER=admin
GRAFANA_PASSWORD=change_this_secure_password
GRAFANA_PORT=3000

# ---------------------------------------------------------------------
# Production - Nginx (if using production profile)
# ---------------------------------------------------------------------
HTTP_PORT=80
HTTPS_PORT=443

# Domain configuration
# DOMAIN=yourdomain.com
# LETSENCRYPT_EMAIL=admin@yourdomain.com

# ---------------------------------------------------------------------
# Development Settings
# ---------------------------------------------------------------------
# RELOAD=true  # Enable auto-reload for development
# DEBUG=false  # Enable debug mode
# SMTP Email (for invitations and onboarding)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=reddy003@gmail.com
SMTP_PASS=nrdb kmgr ducg gyfu
SMTP_FROM=Dyocense <noreply@dyocense.com>
SMTP_TLS=true

LLM_PROVIDER=azure
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=gpt-4o-mini
ALLOW_ANONYMOUS=true
ACCOUNTS_JWT_SECRET=dyocense-dev-secret

# Optional OpenAI configuration (uncomment to use OpenAI)
# OPENAI_API_KEY=
# OPENAI_MODEL=gpt-4o-mini

# Optional Azure OpenAI configuration (requires azure-ai-openai)
AZURE_OPENAI_ENDPOINT=https://ai-hubwppai326115464401.openai.azure.com
AZURE_OPENAI_API_KEY=8mugTjYozcXx4xf4GWE5KN1jJOG7ptwJvDCJxcO1OLnojZ2vI2NlJQQJ99BHACYeBjFXJ3w3AAAAACOGfPtz
AZURE_OPENAI_DEPLOYMENT=gpt-4o-mini
AZURE_OPENAI_TEMPERATURE=0.0
AZURE_OPENAI_MAX_TOKENS=2048
AZURE_OPENAI_EMBED_DEPLOYMENT=text-embedding-3-small

ENABLE_CONNECTORS_SERVICE=true
OPENAI_API_TYPE=azure
# Connector credential encryption key
CONNECTOR_ENCRYPTION_KEY=QI_yCiLQd_9yK37-TxWObkDopayRzUj-8k3z54ioZrQ=
CONNECTOR_PLAINTEXT=1
CONNECTOR_DEV_DISABLE_AUTH=1
CONNECTOR_ENABLE_ERP_MCP=true